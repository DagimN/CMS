<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="/complaintstyles.css">
    <link href="/Materialize/material-icons.css" rel="stylesheet" type="text/css">
    <title>Complaints Page</title>
</head>
<body>
    <header>
        <img class="logo" src="images/CMS_Logo.png">
        <h2> Complaint Management System</h2>
        <a class="top" href="/">Home</a>
        <a class="top" href="/complaintpage">Report Complaint</a>
        <a class="top" href="/faqpage">FAQ</a>
        <a class="top" href="/about">About</a>
        <div class="dropdown">
            <button class="material-icons notification" onclick="viewNotification()">notifications</button> 
            <span id="span" class="notif-num">3</span>
            <div id="notif" class="dropdown-content">
                <p id="defaultnotif"> No new notifications </p>
            </div>
        </div>
    </header>

    <div class="providers">
        <div class="electricity">
            <img class="provico" src="images/lightning.png">
            <p> Contact the electric companies for handling your power needs.</p>
            <div class="option">
                <label><input type="checkbox"> Power Failure </label>
                <label><input type="checkbox"> Payment Bill Error </label>
                <label><input type="checkbox"> Customer Service </label>
                <label><input type="checkbox"> Other </label>
            </div>
            <button class="audio"><img class="icon" src="images/Phone Icon 32.png" /></button>
            <button class="video"><img class="icon" src="images/Video Icon 32.png" /></button>
        </div>

        <div class="water">
            <img class="provico" src="images/drop.png">
            <p> Contact the water companies for handling your water resources.</p>
            <div class="option">
                <label><input type="checkbox"> Power Failure </label>
                <label><input type="checkbox"> Payment Bill Error </label>
                <label><input type="checkbox"> Customer Service </label>
                <label><input type="checkbox"> Other </label>
            </div>
            <button class="audio"><img class="icon" src="images/Phone Icon 32.png" /></button>
            <button class="video"><img class="icon" src="images/Video Icon 32.png" /></button>
        </div>

        <div class="phone">
            <img class="provico" src="images/telephone.png">
            <p> Contact the phone companies for handling your connections.</p>
            <div class="option">
                <label><input type="checkbox"> Power Failure </label>
                <label><input type="checkbox"> Payment Bill Error </label>
                <label><input type="checkbox"> Customer Service </label>
                <label><input type="checkbox"> Other </label>
            </div>
            <button class="audio"><img class="icon" src="images/Phone Icon 32.png" /></button>
            <button class="video"><img class="icon" src="images/Video Icon 32.png" /></button>
        </div>
    </div>

    <div class="complaint">
        <fieldset>
            <legend>
                Report Complaint
            </legend>
            
            <div class="submit">
                <form method="POST" action="/complaintpage">
                    <textarea name="text" id="complaint" cols="31" rows="10" placeholder="Write your complaint here..."></textarea>
                    <p class="date">Insert Schedule (Optional):  <input name="date" class="date" type="date"></p>
               
                    <button class="sendComp" type="submit" onclick="getComplaint()">Send Complaint</button>
                </form>
            </div>
        </fieldset>
    </div>
    <% if(Username === null) { %>
        <script>localStorage.clear()</script>
    <% } %>

    <script src="indexsrc.js"></script>
    <script>
        let notifNum = localStorage.getItem("notification");

        let notifcation = document.getElementById("notif");
        let notifDefault = document.getElementById("defaultnotif");
        let span = document.getElementById("span");
        
        if(notifNum !== '0' && notifNum !== null){
            notifcation.removeChild(notifDefault);
            
            for(let i = 0; i < parseInt(notifNum); i++){
                let p = document.createElement("p");
                let t = document.createTextNode("The complaint has been sent successfully.");
                
                p.appendChild(t);
                notifcation.appendChild(p);
            }
            span.innerHTML = notifNum;
            span.style.display = "flex";
        }
        else{
            span.style.display = "none";
        }
    </script>
</body>
</html>